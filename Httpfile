Future<String> postWithClientCertificate() async {
  final serverEndpoint = 'https://1991269db78887f9e.ngrok.io';
  HttpClient client = new HttpClient();
  var data = createSamplePayment().toJson();
  var request = await client.openUrl('POST', Uri.parse(serverEndpoint + '/paymentrequests'));
  request.headers.set(HttpHeaders.contentTypeHeader, 'APPLICATION/JSON');
  request.write(json.encode(data));
  var response = await request.close();
  String reply = await response.transform(utf8.decoder).join();
  print(reply);
  final Map response1 = json.decode(response);
  DetailsModel details = DetailsModel.fromJson(response1);
  
  return details.token;
}


class DetailsModel {
  String url;
  String token;
  String id;

  DetailsModel({this.url, this.token, this.id});

  DetailsModel.fromJson(Map<String, dynamic> json) {
    url = json['url'];
    token = json['token'];
    id = json['id'];
  }

  Map<String, dynamic> toJson() {
    final Map<String, dynamic> data = new Map<String, dynamic>();
    data['url'] = this.url;
    data['token'] = this.token;
    data['id'] = this.id;
    return data;
  }
}
